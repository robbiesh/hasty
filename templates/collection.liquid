<section class=' block'>
  <div class='container'>
  {% paginate collection.products by 9 %}

    <div class='flex flex-wrap mb-10'>

      <div class='w-1/2 lg:w-1/3 order-2 lg:order-1'>
        <select onChange="window.document.location.href=this.options[this.selectedIndex].value;">
          <option value="{{ shop.url }}/collections/{{ collection.handle }}">All</option>
          {% for tag in collection.all_tags %}
            <option {% if current_tags contains tag %}selected{% endif %} value="{{ shop.url }}/collections/{{ collection.handle }}/{{ tag | handleize }}">{{ tag }}</option>
          {% endfor %}  
        </select>
      </div>

      <div class='lg:w-1/3 w-full text-center order-1 lg:order-2 mb-10 lg:mb-0'>
        <h1 class='text-xl uppercase font-bold'>{{ collection.title }}</h1>
      </div>

      <div class='w-1/2 lg:w-1/3 flex justify-end order-3'>
        {% assign url = canonical_url | split: '?' %}
        {% assign url = url.first %}
        
        <select onChange="window.document.location.href=this.options[this.selectedIndex].value;" class='js-sort'>          
          <option value="{{ url }}?sort_by=manual">Featured</option>
          <option value="{{ url }}?sort_by=price-ascending">Price: Low to High</option>
          <option value="{{ url }}?sort_by=price-descending">Price: High to Low</option>
          <option value="{{ url }}?sort_by=title-ascending">A-Z</option>
          <option value="{{ url }}?sort_by=title-descending">Z-A</option>
          <option value="{{ url }}?sort_by=created-ascending">Oldest to Newest</option>
          <option value="{{ url }}?sort_by=created-descending">Newest to Oldest</option>
          <option value="{{ url }}?sort_by=best-selling">Best Selling</option>
        </select>
      </div>

    </div>

    <div class='grid grid-cols-1 md:grid-cols-3 md:gap-x-4 gap-y-8 w-full'>
      {% for product in collection.products %}
        {% include 'item', prod: product %}
      {% else %}
        <p>No matches.</p>
      {% endfor %}
    </div>


    
    {% if paginate.pages > 1 %}
      <div class='w-full flex justify-center pt-10 pagination'>
        {{ paginate | default_pagination }}
      </div>
    {% endif %}

  {% endpaginate %}
  </div>
</section>
